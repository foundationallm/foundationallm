<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Manage role assignments | FoundationaLLM </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Manage role assignments | FoundationaLLM ">
      
      
      <link rel="icon" href="../media/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/solliancenet/foundationallm/blob/main/docs/role-based-access-control/role-management.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../media/fllm-icon.svg" alt="FoundationaLLM">
            FoundationaLLM
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="manage-role-assignments">Manage role assignments</h1>

<p>FoundationaLLM roles are assigned to users, groups, service principals, and managed identities through the Management API. As described in the <a href="role-definitions.html">role definitions</a> article, administrators can apply fine-grained access control to features and resources to ensure the deployment adheres to least-privilege best practices when properly assigned.</p>
<h2 id="role-management-endpoints">Role management endpoints</h2>
<p>The Management API provides the following role management endpoints:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/instances/{instanceId}/providers/FoundationaLLM.Authorization/roleDefinitions</code></td>
<td>Returns a list of all role definitions.</td>
</tr>
<tr>
<td>POST</td>
<td><code>/instances/{instanceId}/providers/FoundationaLLM.Authorization/roleAssignments/filter</code></td>
<td>Returns the role assignments for a given scope. Here is a sample request payload for retrieving all RBAC role assignments for an FLLM instance: <code>{&quot;scope&quot;:&quot;/instances/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee&quot;}</code>. To retrieve the role assignments for a specific resource, set the request body to the resource's scope: <code>{&quot;scope&quot;:&quot;/instances/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee/providers/FoundationaLLM.Agent/agents/FoundationaLLM&quot;}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/instances/{instanceId}/providers/FoundationaLLM.Authorization/roleAssignments/{roleAssignmentName}</code></td>
<td>Creates a new role assignment. Here is an example request payload: <code>{&quot;name&quot;:&quot;55555555-4444-3333-2222-111111111111&quot;,&quot;description&quot;:&quot;&quot;,&quot;principal_id&quot;:&quot;11111111-2222-3333-4444-555555555555&quot;,&quot;role_definition_id&quot;:&quot;/providers/FoundationaLLM.Authorization/roleDefinitions/a9f0020f-6e3a-49bf-8d1d-35fd53058edf&quot;,&quot;type&quot;:&quot;FoundationaLLM.Authorization/roleAssignments&quot;,&quot;principal_type&quot;:&quot;User&quot;,&quot;scope&quot;:&quot;/instances/aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee/providers/FoundationaLLM.Agent/agents/FoundationaLLM&quot;}</code></td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/instances/{instanceId}/providers/FoundationaLLM.Authorization/roleAssignments/{roleAssignmentName}</code></td>
<td>Deletes a role assignment.</td>
</tr>
</tbody>
</table>
<h2 id="identity-endpoints">Identity endpoints</h2>
<p>The Management API provides the following identity endpoints:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><code>/instances/{instanceId}/identity/users/retrieve</code></td>
<td>Returns a list of user identities. Filter and page through the identities with the following request payload structure: <code>{&quot;name&quot;:&quot;&quot;,&quot;ids&quot;:[],&quot;page_number&quot;:1,&quot;page_size&quot;:null}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/instances/{instanceId}/identity/groups/retrieve</code></td>
<td>Returns a list of group identities. Filter and page through the identities with the following request payload structure: <code>{&quot;name&quot;:&quot;&quot;,&quot;ids&quot;:[],&quot;page_number&quot;:1,&quot;page_size&quot;:null}</code></td>
</tr>
<tr>
<td>POST</td>
<td><code>/instances/{instanceId}/identity/objects/retrievebyids</code></td>
<td>Returns user and group objects by the passed in list of IDs. Here is a sample request payload: <code>{&quot;ids&quot;:[&quot;11111111-2222-3333-4444-555555555555&quot;,&quot;66666666-7777-8888-9999-000000000000&quot;]}</code></td>
</tr>
</tbody>
</table>
<h2 id="role-assignment-management">Role assignment management</h2>
<p>The Management Portal provides a graphical user interface over the Management API for managing roles and role assignments, among other FLLM configuration settings.</p>
<p>All role assignment changes are audited and can be viewed in the Management Portal. Auditing ensures that all changes to role assignments are tracked and can be reviewed at a later time, which is often required for compliance purposes.</p>
<p>The following screenshot shows the role assignment management page in the Management Portal for the FoundationaLLM instance:</p>
<p><img src="../media/role-assignment-management-instance.png" alt="Screenshot of the role assignment management page for the FoundationaLLM instance."></p>
<p>The following screenshot shows the role assignment management form:</p>
<p><img src="../media/role-assignment-management-form.png" alt="Screenshot of the role assignment management form."></p>
<p>Use the <strong>Browse</strong> button to search for users, groups, service principals, and managed identities. Selecting a user, group, service principal, or managed identity will populate the <strong>Principal Type</strong>, <strong>Principal Name</strong>, <strong>Principal Email</strong>, and <strong>Principal ID</strong> fields with the selected identity's information.</p>
<p><img src="../media/role-assignment-management-form-identity-selection.png" alt="Screenshot of the role assignment management form with the identity selection dialog displayed."></p>
<h3 id="assign-access-control-to-a-specific-resource">Assign access control to a specific resource</h3>
<p>Most resources, such as Agents, provide an option to directly assign role-based access control to the resource. The following screenshot shows an <strong>Access Control</strong> button on top of a selected agent's form with the access control dialog displayed after selecting the button:</p>
<p><img src="../media/role-assignment-access-control-dialog.png" alt="Screenshot of the access control dialog for a specific resource."></p>
<p>Note that the <strong>Scope</strong> column of the list of role assignments shows whether the role assignment is at the instance level or at the resource level. A value of <code>This resource</code> indicates a direct role assignment on the resource. When the value is <code>Instance (inherited)</code>, the role assignment is inherited from the instance level. This is similar to how Azure RBAC works.</p>
<h2 id="role-assignment-data-store">Role assignment data store</h2>
<p>The role-based access control (RBAC) engine uses a dedicated data store to manage role assignments. Doing so ensures isolation from the rest of the FoundationaLLM data platform, which is used to store data sources, prompts, and other resources accessible to users possessing varying levels of access. The isolation also supports the ability to scale the RBAC engine independently from the rest of the FoundationaLLM data platform. The data store is implemented as a dedicated Azure Cosmos DB account or Azure Data Lake Storage Gen2 account.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/solliancenet/foundationallm/blob/main/docs/role-based-access-control/role-management.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          © FoundationaLLM. All rights reserved. | Find out more about FoundationaLLM at <a href="https://foundationallm.ai">foundationallm.ai</a>.
        </div>
      </div>
    </footer>
  </body>
</html>
